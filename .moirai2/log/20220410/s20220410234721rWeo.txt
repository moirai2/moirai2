######################################## s20220410234721rWeo ########################################
https://moirai2.github.io/schema/daemon/execute	completed
https://moirai2.github.io/schema/daemon/processtime	0
https://moirai2.github.io/schema/daemon/timecompleted	1649602042
https://moirai2.github.io/schema/daemon/timeended	1649602042
https://moirai2.github.io/schema/daemon/timestarted	1649602042
######################################## status ########################################
registered	1649602042
start	1649602042
end	1649602042
completed	1649602042
######################################## stdout ########################################
submit.json
######################################## bash ########################################
#!/bin/sh
export PATH=/Users/ah3q/Sites/moirai2:/Users/ah3q/Sites/moirai2/bin:/Users/ah3q/Sites/moirai2/.moirai2/bin:$PATH
cmdurl="test/submit.json"
execid="s20220410234721rWeo"
workdir=".moirai2/s20220410234721rWeo"
rootdir="/Users/ah3q/Sites/moirai2"
########## init ##########
cd $rootdir
touch $workdir/status.txt
touch $workdir/log.txt
function status() { echo "$1	"`date +%s` >> $workdir/status.txt ; }
function record() { echo "$1	$2" >> $workdir/log.txt ; }
status start
########## command ##########
ls test
#############################
status end
status=""
if [ -z "$status" ]; then
if [ -s $workdir/stderr.txt ]; then
status=error
fi
fi
if [ -z "$status" ]; then
status=completed
fi
status $status
sleep 1
touch $workdir/status.txt
