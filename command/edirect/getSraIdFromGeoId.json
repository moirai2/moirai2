{"https://moirai2.github.io/schema/daemon/bash":["sraid=`perl bin/getSraIdFromGeoId.pl $geoid `"],"https://moirai2.github.io/schema/daemon/input":["$geoid"],"https://moirai2.github.io/schema/daemon/output":["$sraid"],"https://moirai2.github.io/schema/daemon/return":"$sraid","https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"getSraIdFromGeoId.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","use strict 'vars';","use File::Temp qw/tempfile tempdir/;","my $geoid=shift(@ARGV);","print getSraIdFromGeoId($geoid).\"\\n\";","############################## getSraIdFromGeoId ##############################","sub getSraIdFromGeoId{","\tmy $geoid=shift();","\tmy ($writer,$tmpfile)=tempfile(\"${geoid}XXXX\",DIR=>\"/tmp\",SUFFIX=>\".html\");","\tclose($writer);","\tsystem(\"curl --silent https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=$geoid > $tmpfile\");","\tmy $sraid;","\topen(IN,$tmpfile);","\twhile(<IN>){if(/(SRP\\d+)/){$sraid=$1;}}","\tclose(IN);","\treturn $sraid;","}"]}}