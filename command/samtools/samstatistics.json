{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=\"$workdir/statistics.txt\"","script.pl $input > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"script.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","foreach my $file(@ARGV){","my $lineCount=0;","my $headCount=0;","my $bodyCount=0;","my $unmappedSeq1=0;","my $unmappedSeq2=0;","my $positiveStrand1=0;","my $positiveStrand2=0;","my $negativeStrand1=0;","my $negativeStrand2=0;","my $properlyAligned1=0;","my $properlyAligned2=0;","my $inadequateAlign1=0;","my $inadequateAlign2=0;","my $primaryAlign1=0;","my $primaryAlign2=0;","my $secondaryAlign1=0;","my $secondaryAlign2=0;","my $readCount1=0;","my $readCount2=0;","my $paired_flag=0;","my $filesize=-s $file;","if($file=~/\\.bam/){open(IN,\"samtools view -h $file|\");}","else{open(IN,$file);}","while(<IN>){","chomp;","my ($qname,$flag,$rname,$pos,$mapq,$cigar,$rnext,$pnexxt,$tlen,$seq,$qual,@others)=split(/\\t/);","$lineCount++;","if(/^@/){$headCount++;next;}","else{$bodyCount++;}","if(($flag&1)>0){","$paired_flag=1;","if(($flag&4)>0){","if(($flag&64)>0){$unmappedSeq1++;}","elsif(($flag&128)>0){$unmappedSeq2++;}","}else{","if(($flag&64)>0){","if(($flag&16)>0){$negativeStrand1++;}","else{$positiveStrand1++;}","}elsif(($flag&128)>0){","if(($flag&16)>0){$negativeStrand2++;}","else{$positiveStrand2++;}","}","if(($flag&2)>0){","if(($flag&64)>0){","$properlyAligned1++;","if(($flag&256)>0){$secondaryAlign1++;}","else{$primaryAlign1++;}","}elsif(($flag&128)>0){","$properlyAligned2++;","if(($flag&256)>0){$secondaryAlign2++;}","else{$primaryAlign2++;}","}","}else{","if(($flag&64)>0){","$inadequateAlign1++;","if(($flag&256)>0){$secondaryAlign1++;}","else{$primaryAlign1++;}","}elsif(($flag&128)>0){","$inadequateAlign2++;","if(($flag&256)>0){$secondaryAlign2++;}","else{$primaryAlign2++;}","}","}","}","if(($flag&64)>0){$readCount1++;}","elsif(($flag&128)>0){$readCount2++;}","}else{","if(($flag&4)>0){$unmappedSeq1++;}","else{","if(($flag&16)>0){$negativeStrand1++;}","else{$positiveStrand1++;}","if(($flag&256)>0){$secondaryAlign1++;}","else{$primaryAlign1++;}","}","}","}","close(IN);","if($paired_flag==1){","print \"$file\\tfilesize\\t$filesize\\n\";","print \"$file\\tlinecount\\t$lineCount\\n\";","print \"$file\\theadcount\\t$headCount\\n\";","print \"$file\\tbodycount\\t$bodyCount\\n\";","print \"$file\\tunmappedseq1\\t$unmappedSeq1\\n\";","print \"$file\\tunmappedseq2\\t$unmappedSeq2\\n\";","print \"$file\\treadcount1\\t$readCount1\\n\";","print \"$file\\treadcount2\\t$readCount2\\n\";","print \"$file\\tprimaryalign1\\t$primaryAlign1\\n\";","print \"$file\\tprimaryalign2\\t$primaryAlign2\\n\";","print \"$file\\tsecondaryalign1\\t$secondaryAlign1\\n\";","print \"$file\\tsecondaryalign2\\t$secondaryAlign2\\n\";","print \"$file\\tpositivestrand1\\t$positiveStrand1\\n\";","print \"$file\\tpositivestrand2\\t$positiveStrand2\\n\";","print \"$file\\tnegativestrand1\\t$negativeStrand1\\n\";","print \"$file\\tnegativestrand2\\t$negativeStrand2\\n\";","print \"$file\\tproperlyaligned1\\t$properlyAligned1\\n\";","print \"$file\\tproperlyaligned2\\t$properlyAligned2\\n\";","print \"$file\\tinadequatealign1\\t$inadequateAlign1\\n\";","print \"$file\\tinadequatealign2\\t$inadequateAlign2\\n\";","}else{","print \"$file\\tfilesize\\t$filesize\\n\";","print \"$file\\tlinecount\\t$lineCount\\n\";","print \"$file\\theadcount\\t$headCount\\n\";","print \"$file\\tbodycount\\t$bodyCount\\n\";","print \"$file\\tunmappedseq1\\t$unmappedSeq1\\n\";","print \"$file\\treadcount1\\t$readCount1\\n\";","print \"$file\\tprimaryalign1\\t$primaryAlign1\\n\";","print \"$file\\tsecondaryalign1\\t$secondaryAlign1\\n\";","print \"$file\\tpositivestrand1\\t$positiveStrand1\\n\";","print \"$file\\tnegativestrand1\\t$negativeStrand1\\n\";","}","}"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
