{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=$workdir/table.txt","samtools view -H $input | extract.pl > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"extract.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my @array=();","my $keys={};","while(<STDIN>){","chomp;","if(/^\\@SQ\\t(.+)$/){","my $hash={};","foreach my $token(split(/\\t/,$1)){","my ($key,$val)=split(/\\:/,$token);","if($key eq \"SN\"){$hash->{\"sequence_name\"}=$val;}","elsif($key eq \"LN\"){$hash->{\"sequence_length\"}=$val;}","elsif($key eq \"AH\"){$hash->{\"alternate_locus\"}=$val;}","elsif($key eq \"AN\"){$hash->{\"alternative_name\"}=$val;}","elsif($key eq \"AS\"){$hash->{\"assembly_identifier\"}=$val;}","elsif($key eq \"DS\"){$hash->{\"description\"}=$val;}","elsif($key eq \"SP\"){$hash->{\"species\"}=$val;}","elsif($key eq \"M5\"){$hash->{\"MD5\"}=$val;}","}","push(@array,$hash);","}","}","my $temps={};","foreach my $hash(@array){foreach my $key(keys(%{$hash})){if($key ne \"sequence_name\"){$temps->{$key}=1;}}}","my @labels=sort{$a cmp $b}keys(%{$temps});","print \"sequence_name\\t\".join(\"\\t\",@labels).\"\\n\";","foreach my $hash(@array){","print $hash->{\"sequence_name\"};","for(my $i=0;$i<scalar(@labels);$i++){","my $key=$labels[$i];","print \"\\t\".$hash->{$key};","}","print \"\\n\";","}"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
