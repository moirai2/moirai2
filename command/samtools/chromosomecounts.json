{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=$workdir/output.txt","samtools view $input | extract.pl > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"extract.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $chromosomes={};","$chromosomes->{\"primary\"}={};","$chromosomes->{\"secondary\"}={};","while(<STDIN>){","chomp;","my ($qname,$flag,$rname,$pos,$mapq,$cigar,$rnext,$pnexxt,$tlen,$seq,$qual,@others)=split(/\\t/);","if(($flag&256)>0){$chromosomes->{\"secondary\"}->{$rname}++;}","else{$chromosomes->{\"primary\"}->{$rname}++;}","}","my $hash={};","foreach my $rank(keys(%{$chromosomes})){foreach my $key(keys(%{$chromosomes->{$rank}})){$hash->{$key}=1;}}","print \"\\tprimary\\tsecondary\\n\";","foreach my $key(sort{$a cmp $b}keys(%{$hash})){","my $primary=exists($chromosomes->{\"primary\"}->{$key})?$chromosomes->{\"primary\"}->{$key}:0;","my $secondary=exists($chromosomes->{\"secondary\"}->{$key})?$chromosomes->{\"secondary\"}->{$key}:0;","print \"$key\\t$primary\\t$secondary\\n\";","}"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
