{"https://moirai2.github.io/schema/daemon/input":["$input1","$input2","$reference"],"https://moirai2.github.io/schema/daemon/bash":["edit.pl $input1 $input2 $workdir/read1.fq $workdir/read2.fq","filtered1=\"$workdir/filtered1.fq.gz\"","filtered2=\"$workdir/filtered2.fq.gz\"","log=\"$workdir/log.txt\"","artifact1=\"$workdir/artifact1.fq.gz\"","artifact2=\"$workdir/artifact2.fq.gz\"","tagdust -1 R:N -o $workdir/tmp -ref $reference $workdir/read1.fq $workdir/read2.fq","mv $workdir/$stderrfile $log","cat $workdir/tmp_un_READ1.fq | gzip -c > $artifact1","cat $workdir/tmp_un_READ2.fq | gzip -c > $artifact2","cat $workdir/tmp_READ1.fq | gzip -c > $filtered1","cat $workdir/tmp_READ2.fq | gzip -c > $filtered2","rm $workdir/read1.fq","rm $workdir/read2.fq","rm $workdir/tmp_logfile.txt","rm $workdir/tmp_un_READ1.fq","rm $workdir/tmp_un_READ2.fq","rm $workdir/tmp_READ1.fq","rm $workdir/tmp_READ2.fq"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"edit.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $reader1=openRead($ARGV[0]);","my $reader2=openRead($ARGV[1]);","my $writer1=openWrite($ARGV[2]);","my $writer2=openWrite($ARGV[3]);","while(!eof($reader1)){","my ($id1,$seq1,$di1,$qual1)=readfastq($reader1);","my ($id2,$seq2,$di2,$qual2)=readfastq($reader2);","print $writer1 \"$id1\\n$seq1\\n$di1\\n$qual1\\n\";","print $writer2 \"$id1\\n$seq2\\n$di1\\n$qual2\\n\";","}","close($reader1);","close($reader2);","close($writer1);","close($writer2);","sub openRead{","my $file=shift();","my $command=$file;","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\";}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\";}","open(my $reader,$command);","return $reader;","}","sub openWrite{","my $file=shift();","my $command=\">$file\";","if($file=~/\\.bz2$/){$command=\"|bzip2 > $file\";}","if($file=~/\\.gz$/){$command=\"|gzip > $file\";}","open(my $writer,$command);","return $writer;","}","sub readfastq{","my $reader=shift();","my $seqid=<$reader>;","chomp($seqid);","my $seqline=<$reader>;","chomp($seqline);","my $qualid=<$reader>;","chomp($qualid);","my $qualline=<$reader>;","chomp($qualline);","return ($seqid,$seqline,$qualid,$qualline);","}"]},"https://moirai2.github.io/schema/daemon/output":["$filtered1","$filtered2","$log","$artifact1","$artifact2"],"https://moirai2.github.io/schema/daemon/seqcount":["$filtered1","$artifact1","$filtered2","$artifact2"]}
