{"https://moirai2.github.io/schema/daemon/select":["$input->https://moirai2.github.io/schema/daemon/execute->$nodeid","$nodeid->https://moirai2.github.io/schema/daemon/command->$this","$nodeid->$this#output->$output"],"https://moirai2.github.io/schema/daemon/bash":"convert.pl $input $output $from $to","https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"convert.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","use strict 'vars';","use File::Basename;","my $inputDirectory=$ARGV[0];","my $outputDirectory=$ARGV[1];","if(!defined($outputDirectory)){$outputDirectory.=\".tmp\";}","my $replaces=[];","for(my $i=2;$i+1<scalar(@ARGV);$i+=2){push(@{$replaces},[$ARGV[$i],$ARGV[$i+1]]);}","if(scalar(@{$replaces})==0){","push(@{$replaces},[\"(http://moirai2.github.io/javascript/\\d+/)\",\"https://moirai2.github.io/\"]);","push(@{$replaces},[\"(http://moirai2.github.io/schema/)\",\"https://moirai2.github.io/schema/\"]);","}","############################## getFiles ##############################","mkdir($outputDirectory);","directories($inputDirectory,$outputDirectory);","############################## directories ##############################","sub directories{","my $inputDirectory=shift();","my $outputDirectory=shift();","my @files=();","opendir(DIR,$inputDirectory);","foreach my $file(readdir(DIR)){","if($file eq \".\"){next;}","if($file eq \"..\"){next;}","if($file =~ /^\\./){next;}","if($file eq \"\"){next;}","my $inpath=\"$inputDirectory/$file\";","my $outpath=\"$outputDirectory/$file\";","if(-d $inpath){mkdir($outpath);directories($inpath,$outpath);}","else{convert($inpath,$outpath,$replaces);}","}","closedir(DIR);","return @files;","}","############################## convert ##############################","sub convert{","my $infile=shift();","my $outfile=shift();","my $replaces=shift();","open(IN,$infile);","my $filename=basename($infile);","open(OUT,\">$outfile\");","while(<IN>){chomp;foreach my $replace(@{$replaces}){my ($from,$to)=@{$replace};s/$from/$to/g;}print OUT \"$_\\n\";}","close(OUT);","close(IN);","}"]},"https://moirai2.github.io/schema/daemon/output":["$from","$to"]}
