{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=$workdir/tpm.txt","tpm.pl $input > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"tpm.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $input=$ARGV[0];","open(IN,$input);","<IN>;","my @totals=();","while(<IN>){","chomp;","my @tokens=split(/\\t/);","for(my $i=1;$i<scalar(@tokens);$i++){$totals[$i]+=$tokens[$i];}","}","close(IN);","open(IN,$input);","my $line=<IN>;","print $line;","while(<IN>){","chomp;","my @tokens=split(/\\t/);","for(my $i=1;$i<scalar(@tokens);$i++){","if($tokens[$i]>0){$tokens[$i]=$tokens[$i]/$totals[$i]*1000000;}","}","print join(\"\\t\",@tokens).\"\\n\";","}","close(IN);"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
