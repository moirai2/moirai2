{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=$workdir/output.fq","script.pl $input > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"script.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $id;","my $sequence=\"\";","my $file=shift(@ARGV);","my $command=\"$file\";","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\"}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\"}","open(IN,$command);","while(<IN>){","chomp;s/\\r//g;","if(/^>\\s*(.+)$/){","printfastq($id,$sequence);","$id=$1;","$sequence=\"\";","}else{","$sequence.=$_;","}","}","printfastq($id,$sequence);","sub printfastq{","my $id=shift();","my $sequence=shift();","my $length=length($sequence);","if($length==0){return;}","my $quality=\"\";","for(my $i=0;$i<$length;$i++){$quality.=\"/\";}","print \"\\@$id\\n$sequence\\n+\\n$quality\\n\";","}"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
