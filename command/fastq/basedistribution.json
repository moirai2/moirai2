{"https://moirai2.github.io/schema/daemon/input":"$input","https://moirai2.github.io/schema/daemon/bash":["output=\"$workdir/distribution.txt\"","countbase.pl $input > $output"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"countbase.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $hash={};","my $total={};","my $file=shift(@ARGV);","my $command=\"$file\";","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\"}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\"}","open(IN,$command);","while(!eof(IN)){","<IN>;","my $sequence=<IN>;","chomp($sequence);","my @chars=split(//,$sequence);","for(my $index=0;$index<scalar(@chars);$index++){","my $char=$chars[$index];","if(!exists($hash->{$index})){$hash->{$index}={};}","$hash->{$index}->{$char}++;","$total->{$char}++;","}","<IN>;","<IN>;","}","my @bases=sort {$a cmp $b} keys(%{$total});","print \"\\t\".join(\"\\t\",@bases).\"\\n\";","foreach my $index (sort{$a<=>$b} keys(%{$hash})){","print $index+1;","foreach my $base(@bases){my $count=exists($hash->{$index}->{$base})?$hash->{$index}->{$base}:0;print \"\\t$count\";}","print \"\\n\";","}"]},"https://moirai2.github.io/schema/daemon/output":"$output"}
