{"https://moirai2.github.io/schema/daemon/input":["$input","$top"],"https://moirai2.github.io/schema/daemon/bash":["sampleseq=\"$workdir/sampleseq.txt\"","sampleseq.pl $input $top > $sampleseq"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"sampleseq.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $file=$ARGV[0];","my $number=$ARGV[1];","if(!defined($number)){$number=10;}","my $command=\"$file\";","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\"}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\"}","open(IN,$command);","my $index=1;","my $order=1;","my $prevcount;","while(<IN>){","chomp;","my ($sequence,$count)=split(/\\t/);","if(!defined($prevcount)){$order=1;}","elsif($prevcount>$count){$order=$index;}","print \"$file\\tsampleseq\\t$file#sample$index\\n\";","print \"$file#sample$index\\tseqorder\\t$order\\n\";","print \"$file#sample$index\\tseqcount\\t$count\\n\";","print \"$file#sample$index\\tsequence\\t$sequence\\n\";","if($index++>=$number){last;}","$prevcount=$count;","}","close(IN);"]},"https://moirai2.github.io/schema/daemon/output":"$sampleseq"}
