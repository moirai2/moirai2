{"https://moirai2.github.io/schema/daemon/input":"$directory","https://moirai2.github.io/schema/daemon/bash":"count=`count.pl $directory`","https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"count.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","use strict 'vars';","use FileHandle;","my $directory=$ARGV[0];","opendir(DIR,$directory);","my @fastq=();","foreach my $file(readdir(DIR)){","if($file eq \".\"){next;}","if($file eq \"..\"){next;}","if($file eq \"\"){next;}","if($file!~/\\.f(ast)?q/){next;}","push(@fastq,\"$directory/$file\");","}","closedir(DIR);","my $total=0;","foreach my $fastq(@fastq){","my $reader=($fastq=~/\\.gz(ip)?$/)?IO::File->new(\"gzip -cd $fastq|\"):($fastq=~/\\.b(ip)?2$/)?IO::File->new(\"bzip2 -cd $fastq|\"):IO::File->new($fastq);","my $count=0;","while(<$reader>){$count++;}","$total+=$count/4;","close($reader);","}","print \"$total\\n\";"]},"https://moirai2.github.io/schema/daemon/output":"$count"}
