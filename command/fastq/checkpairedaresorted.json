{"https://moirai2.github.io/schema/daemon/input":["$read1","$read2"],"https://moirai2.github.io/schema/daemon/bash":["sorted=$(check.pl $read1 $read2)"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"check.pl","https://moirai2.github.io/schema/daemon/script/code":["#!/usr/bin/perl","my $read1=openread($ARGV[0]);","my $read2=openread($ARGV[1]);","while(!eof($read1)){","my ($si1,$sl1,$qi1,$ql1,$id1)=readfastq($read1);","my ($si2,$sl2,$qi2,$ql2,$id2)=readfastq($read2);","if($id1 ne $id2){print \"ERROR\n\";exit();}","}","print \"OK\n\";","sub readfastq{","my $reader=shift();","my $seqid=<$reader>;chomp($seqid);","my $seqline=<$reader>;chomp($seqline);","my $qualid=<$reader>;chomp($qualid);","my $qualline=<$reader>;chomp($qualline);","my $id=$seqid;","if($id=~/^(.+)\\s/){$id=$1;}","return ($seqid,$seqline,$qualid,$qualline,$id);","}","sub openread{","my $file=shift();","if($file=~/\\.bz2$/){open(my $reader,\"bzip2 -cd $file|\");return $reader;}","elsif($file=~/\\.gz$/){open(my $reader,\"gzip -cd $file|\");return $reader;}","else{open(my $reader,$file);return $reader;}","}"]},"https://moirai2.github.io/schema/daemon/output":"$sorted"}
